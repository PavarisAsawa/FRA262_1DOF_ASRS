/*
 * BaseSystem.h
 *
 *  Created on: Apr 28, 2024
 *      Author: ponpon
 */

#ifndef INC_BASESYSTEM_H_
#define INC_BASESYSTEM_H_


#include <ModBusRTU.h>
#include "Encoder.h"
#include "Joystick.h"
#include "Controller.h"
#include "main.h"

extern ModbusHandleTypedef hmodbus;
extern u16u8_t registerFrame[200];

typedef struct {
	uint16_t speed;
	uint16_t position;
	uint16_t acce;
}Z_Value;

typedef struct _JoystickStructure
{
	uint16_t XYBuffer[200];			// Even Number is X [0,2,4,...] , Odd is Y [1,3,5,...]
	uint16_t X;
	uint16_t Y;
	uint16_t PIN[4];				//A B C D
	float PointPosition[5];
}JoystickStructureTypeDef;

typedef struct {
	uint16_t GoalPoint;
	uint16_t PickOrder;
	uint16_t PlaceOrder;
	uint16_t Pick[5];
	uint16_t Place[5];
	float PickPosition[5];
	float PlacePosition[5];

}GetValue;

typedef struct {
	uint16_t HeartFlag;
	uint16_t VacuumState;
	uint16_t GripperState;
	int Z_Status;
	int reset;
	int StateFrame;
	int Place;
}State;

typedef struct {
	uint16_t ShelvePosition_1;
	uint16_t ShelvePosition_2;
	uint16_t ShelvePosition_3;
	uint16_t ShelvePosition_4;
	uint16_t ShelvePosition_5;
}ShelvePosition;
void hello2()
{
	hello();
}
void Heartbeat();
void Routine(QEIStructureTypeDef *qei);
void VacuumOn_Off();
void Gripper_Movement();
void Set_Shelves();
void GetGoalPoint();
void RunPointMode();
void SetHome();
void GetPick_PlaceOrder(JoystickStructureTypeDef* joy);
void RunJogMode();

#endif /* INC_BASESYSTEM_H_ */
